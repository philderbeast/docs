<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Package telemetry SDKs - Scarf Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Package telemetry SDKs";
    var mkdocs_page_input_path = "package-analytics.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Scarf Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Introduction</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Package telemetry SDKs</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#scarf-sdks-for-library-and-package-authors">Scarf SDKs for library and package authors</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#javascript">JavaScript</a></li>
        
            <li><a class="toctree-l3" href="#data-collection-and-privacy">Data collection and privacy</a></li>
        
            <li><a class="toctree-l3" href="#more-languages-coming-soon">More languages coming soon</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../web-traffic/">Documentation and web traffic analytics</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../distribute-with-scarf/">Package manager (maintainers)</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../end-user/">Package manager (end-user)</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Scarf Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Package telemetry SDKs</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="scarf-sdks-for-library-and-package-authors">Scarf SDKs for library and package authors</h1>
<p>Scarf's language SDKs provide observability into the usage of your libraries and language-level packages. By simply adding a dependency to a Scarf language library, you can be getting better insight into how your package is used, and by which companies.</p>
<h2 id="javascript">JavaScript</h2>
<h3 id="features">Features</h3>
<ul>
<li>Collects basic installation statistics on <code>npm install</code>. </li>
<li>No dependencies</li>
<li>Fully transparent to the user. Scarf will log its behavior to the console during installation. It will never silently report analytics for someone that hasn't explictly given permission to do so.</li>
<li>Never interrupts your package installation. Reporting is done on a best effort basis.</li>
</ul>
<p>You can find scarf-js on <a href="https://github.com/scarf-sh/scarf-js">Github</a> or on
<a href="https://www.npmjs.com/package/@scarf/scarf">npm</a> directly.</p>
<h3 id="installation">Installation</h3>
<p>You'll first need to create a package entry on Scarf. Be sure to select "External library", and set the package type to "npm". </p>
<p>Once created, add a dependency on this library to your own:</p>
<pre><code class="bash">npm i --save @scarf/scarf
</code></pre>

<p>Once your library is published to npm with this change, Scarf will automatically
collect stats on install, no additional code is required!</p>
<p>Head to your package's dashboard on Scarf to see your reports when available.</p>
<h4 id="how-does-it-work">How does it work?</h4>
<p><code>scarf-js</code> registers a <code>postInstall</code> hook that sends telemetry information. This library has no runtime footprint, it only runs at installation time, when a developer runs <code>npm install</code> Continue reading below <a href="#what-information-does-scarf-js-send?">here</a></p>
<h4 id="configuration">Configuration</h4>
<p>Users of your package will be opted in by default and can opt out by setting the
<code>SCARF_ANALYTICS=false</code> environment variable. If you'd Scarf analytics to
instead be opt-in, you can set this by adding an entry to your <code>package.json</code></p>
<pre><code class="json5">// your-package/package.json

{
  // ...
  &quot;scarfSettings&quot;: {
    &quot;defaultOptIn&quot;: false
  }
  // ...
}
</code></pre>

<p>Scarf will now be opt-out by default, and users can set <code>SCARF_ANALYTICS=true</code>
to opt in.</p>
<p>Regardless of the default state, Scarf will log what it is doing to users who
haven't explictly opted in or out.</p>
<p>By default, scarf-js will only trigger analytics when your package is installed as a dependency of another package, or is being installed globally. This ensures that scarf-js analytics will not be triggered on <code>npm install</code> being run <em>within your project</em>. To change this, you can add:</p>
<pre><code class="json5">// your-package/package.json

{
  // ...
  &quot;scarfSettings&quot;: {
    &quot;allowTopLevel&quot;: true
  }
  // ...
}
</code></pre>

<h3 id="faq">FAQ</h3>
<h4 id="what-information-does-scarf-js-provide-me-as-a-package-author">What information does scarf-js provide me as a package author?</h4>
<ul>
<li>Understanding your user-base</li>
<li>Which companies are using your package?</li>
<li>Is your project growing or shrinking? Where? On which platforms?</li>
<li>Which versions of your package are being used?</li>
</ul>
<h4 id="what-information-does-scarf-js-send">What information does scarf js send?</h4>
<p>See more <a href="#data-collection-and-privacy">here</a>.</p>
<h4 id="as-a-user-of-a-package-using-scarf-js-how-can-i-opt-out-of-analytics">As a user of a package using scarf-js, how can I opt out of analytics?</h4>
<p>Scarf's analytics help support developers of the open source packages you are
using, so enabling analytics is appreciated. However, if you'd like to opt out,
you can add your preference to your project's <code>package.json</code>:</p>
<pre><code class="json5">// your-package/package.json

{
  // ...
  &quot;scarfSettings&quot;: {
    &quot;enabled&quot;: false
  }
  // ...
}
</code></pre>

<p>Alternatively, you can set this variable in your environment:</p>
<pre><code class="shell">export SCARF_ANALYTICS=false
</code></pre>

<p>Either route will disable Scarf for all packages.</p>
<h4 id="how-can-i-inspect-the-json-payload-that-scarf-js-sends">How can I inspect the JSON payload that scarf-js sends?</h4>
<p>scarf-js will run in verbose mode depending on the <code>SCARF_VERBOSE</code> environment variable:</p>
<pre><code class="shell">export SCARF_VERBOSE=true
</code></pre>

<p>It will print out the JSON payload, as well as any debugging information.</p>
<h4 id="i-distribute-a-package-on-npm-and-scarf-js-is-in-our-dependency-tree-can-i-disable-the-analytics-for-my-downstream-dependents">I distribute a package on npm, and scarf-js is in our dependency tree. Can I disable the analytics for my downstream dependents?</h4>
<p>Yes. By opting out of analytics via <code>package.json</code>, any package upstream will have analytics disbabled.</p>
<pre><code class="json5">// your-package/package.json

{
  // ...
  &quot;scarfSettings&quot;: {
    &quot;enabled&quot;: false
  }
  // ...
}
</code></pre>

<p>Installers of your packages will have scarf-js disabled for all dependencies upstream from yours.</p>
<h3 id="developing">Developing</h3>
<p>Setting the environment variable <code>SCARF_LOCAL_PORT=8080</code> will configure Scarf to
use http://localhost:8080 as the analytics endpoint host.</p>
<h2 id="data-collection-and-privacy">Data collection and privacy</h2>
<p><strong>Scarf does not store any personally identifying information from SDK telemetry data.</strong> Scarf only collects information that is helpful for:</p>
<ul>
<li>Package maintainence </li>
<li>Identifying which companies are using a particular package, in order to set up support agreements between developers and companies. </li>
</ul>
<p>Specifically, scarf-js sends:</p>
<ul>
<li>The operating system you are using</li>
<li>Your IP address will be used to look up any available company information. <em>Scarf does not store the actual IP address</em></li>
<li>Limited dependency tree information. Scarf sends the name and version of the package(s) that directly depend on scarf-js. Additionally, scarf-js will send SHA256-hashed name and version for the following packages in the dependency tree:</li>
<li>Packages that depend on a package that depends on scarf-js.</li>
<li>The root package of the dependency tree.
This allows Scarf to provide maintainers information about which public packages are using their own, without exposing identifying details of non-public packages.</li>
</ul>
<h2 id="more-languages-coming-soon">More languages coming soon</h2>
<p>We're working to build out sibling libraries for various languages. If you're
interested in using Scarf in a language we haven't released yet, let us know!</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../web-traffic/" class="btn btn-neutral float-right" title="Documentation and web traffic analytics">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="Introduction"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../web-traffic/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
